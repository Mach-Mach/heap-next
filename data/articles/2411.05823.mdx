---
title: 'FlexCAD: Unified and Versatile Controllable CAD Generation with Fine-tuned Large Language Models'
date: 2024-11-12
tags: ['generation quality', 'CAD construction hierarchies', 'hierarchy-aware masking strategy', 'computer-aided design', 'controllable CAD generation', 'controllability', 'large language models']
categories: ['cs.AI', 'cs.GR', 'cs.CV']
problem: F
solution: ['limited controllability in existing CAD generation models']
pdf_url: https://arxiv.org/pdf/2411.05823
arx_url: https://arxiv.org/abs/2411.05823
score: 5
authors: ['Zhanwei Zhang', 'Shizhao Sun', 'Wenxiao Wang', 'Deng Cai', 'Jiang Bian']
affiliations_aligned: ['State Key Lab of CAD&CG, Zhejiang University', 'Microsoft', 'School of Software Technology, Zhejiang University', 'State Key Lab of CAD&CG, Zhejiang University', 'Microsoft']
affiliations: ['School of Software Technology, Zhejiang University', 'Microsoft', 'State Key Lab of CAD&CG, Zhejiang University']
---


Recently, there is a growing interest in creating computer-aided design (CAD) models based on user intent, known as controllable CAD generation. Existing work offers limited controllability and needs separate models for different types of control, reducing efficiency and practicality. To achieve controllable generation across all CAD construction hierarchies, such as sketch-extrusion, extrusion, sketch, face, loop and curve, we propose FlexCAD, a unified model by fine-tuning large language models (LLMs). First, to enhance comprehension by LLMs, we represent a CAD model as a structured text by abstracting each hierarchy as a sequence of text tokens. Second, to address various controllable generation tasks in a unified model, we introduce a hierarchy-aware masking strategy. Specifically, during training, we mask a hierarchy-aware field in the CAD text with a mask token. This field, composed of a sequence of tokens, can be set flexibly to represent various hierarchies. Subsequently, we ask LLMs to predict this masked field. During inference, the user intent is converted into a CAD text with a mask token replacing the part the user wants to modify, which is then fed into FlexCAD to generate new CAD models. Comprehensive experiments on public dataset demonstrate the effectiveness of FlexCAD in both generation quality and controllability. Code will be available at https://github.com/microsoft/CADGeneration/FlexCAD.